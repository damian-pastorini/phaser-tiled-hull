!function(t,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.phaserTiledHull=n():t.phaserTiledHull=n()}(this,function(){return function(t){function n(e){if(r[e])return r[e].exports;var o=r[e]={i:e,l:!1,exports:{}};return t[e].call(o.exports,o,o.exports,n),o.l=!0,o.exports}var r={};return n.m=t,n.c=r,n.i=function(t){return t},n.d=function(t,r,e){n.o(t,r)||Object.defineProperty(t,r,{configurable:!1,enumerable:!0,get:e})},n.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(r,"a",r),r},n.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},n.p="",n(n.s=1)}([function(t,n,r){"use strict";function e(t){if(Array.isArray(t)){for(var n=0,r=Array(t.length);n<t.length;n++)r[n]=t[n];return r}return Array.from(t)}function o(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.tileIndices,e=void 0===r?null:r,o=n.tileProperty,a=void 0===o?null:o,f=n.checkCollide,c=void 0!==f&&f,p=i(t,e,a,c),v=u(p),y=l(v),d=[],x=!0,g=!1,m=void 0;try{for(var b,w=y.entries()[Symbol.iterator]();!(x=(b=w.next()).done);x=!0){var _=b.value,P=h(_,2),S=P[0],M=P[1],j=[],O=!0,X=!1,z=void 0;try{for(var C,A=M[Symbol.iterator]();!(O=(C=A.next()).done);O=!0){var I=C.value;j.push(new s.a(I,S))}}catch(t){X=!0,z=t}finally{try{!O&&A.return&&A.return()}finally{if(X)throw z}}d.push(j)}}catch(t){g=!0,m=t}finally{try{!x&&w.return&&w.return()}finally{if(g)throw m}}return d}function i(t,n,r,e){function o(t){return!!t&&(!(!n||!n.includes(t.index))||(!(!r||!t.properties[r])||!(!e||!t.collides)))}function i(t,n,r){var e=a(t,n);o(e)&&-1===r.indexOf(e)&&(r.push(e),i(t,n-1,r),i(t,n+1,r),i(t+1,n,r),i(t-1,n,r))}for(var u=t.map,l=[],a=function(n,r){return u.getTile(n,r,t.index)},f=0;f<u.width;f++)for(var c=0;c<u.height;c++){var s=a(f,c);if(o(s)&&!function(t){var n=!0,r=!1,e=void 0;try{for(var o,i=l[Symbol.iterator]();!(n=(o=i.next()).done);n=!0){var u=o.value,a=!0,f=!1,c=void 0;try{for(var s,h=u[Symbol.iterator]();!(a=(s=h.next()).done);a=!0){if(t===s.value)return u}}catch(t){f=!0,c=t}finally{try{!a&&h.return&&h.return()}finally{if(f)throw c}}}}catch(t){r=!0,e=t}finally{try{!n&&i.return&&i.return()}finally{if(r)throw e}}return null}(s)){var h=[];i(f,c,h),l.push(h)}}return l}function u(t){var n=[],r=!0,e=!1,o=void 0;try{for(var i,u=t[Symbol.iterator]();!(r=(i=u.next()).done);r=!0){var l=i.value,a=[],f=!0,s=!1,h=void 0;try{for(var p,v=l[Symbol.iterator]();!(f=(p=v.next()).done);f=!0){var y=p.value;a.push([y.left,y.top],[y.right,y.top],[y.left,y.bottom],[y.right,y.bottom])}}catch(t){s=!0,h=t}finally{try{!f&&v.return&&v.return()}finally{if(s)throw h}}var d=c()(a,1);n.push(d)}}catch(t){e=!0,o=t}finally{try{!r&&u.return&&u.return()}finally{if(e)throw o}}return n}function l(t){var n=[],r=!0,o=!1,i=void 0;try{for(var u,l=t[Symbol.iterator]();!(r=(u=l.next()).done);r=!0){for(var f=u.value,c=[],s=new(Function.prototype.bind.apply(Phaser.Line,[null].concat(e(f[0]),e(f[1])))),h=void 0,p=1;p<f.length;p++)h=new(Function.prototype.bind.apply(Phaser.Line,[null].concat(e(f[p-1]),e(f[p])))),a(s,h)?s=new Phaser.Line(s.start.x,s.start.y,h.end.x,h.end.y):(c.push(s),s=h.clone());if(h=new(Function.prototype.bind.apply(Phaser.Line,[null].concat(e(f[f.length-1]),e(f[0])))),a(s,h)?(s=new Phaser.Line(s.start.x,s.start.y,h.end.x,h.end.y),c.push(s)):(c.push(s),c.push(h)),a(c[0],c[c.length-1])){var v=c.shift(),y=c.pop(),d=new Phaser.Line(v.start.x,v.start.y,y.end.x,y.end.y);c.push(d)}n.push(c)}}catch(t){o=!0,i=t}finally{try{!r&&l.return&&l.return()}finally{if(o)throw i}}return n}function a(t,n){var r=t.end.x-t.start.x,e=t.end.y-t.start.y,o=n.end.x-n.start.x;return r*(n.end.y-n.start.y)-e*o==0}Object.defineProperty(n,"__esModule",{value:!0}),n.default=o;var f=r(6),c=r.n(f),s=r(2),h=function(){function t(t,n){var r=[],e=!0,o=!1,i=void 0;try{for(var u,l=t[Symbol.iterator]();!(e=(u=l.next()).done)&&(r.push(u.value),!n||r.length!==n);e=!0);}catch(t){o=!0,i=t}finally{try{!e&&l.return&&l.return()}finally{if(o)throw i}}return r}return function(n,r){if(Array.isArray(n))return n;if(Symbol.iterator in Object(n))return t(n,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()},function(t,n,r){t.exports=r(0).default},function(t,n,r){"use strict";function e(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(t,n){for(var r=0;r<n.length;r++){var e=n[r];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}return function(n,r,e){return r&&t(n.prototype,r),e&&t(n,e),n}}(),i=function(){function t(n,r){e(this,t),this.line=n,this.length=n.length,this.midpoint=n.midPoint(),this.normal=this._getOutwardNormal(n),this.shapeId=r}return o(t,[{key:"_getOutwardNormal",value:function(t){return new Phaser.Point(t.end.y-t.start.y,-(t.end.x-t.start.x)).setMagnitude(1)}}]),t}();n.a=i},function(t,n){function r(t,n,r){return(n[0]-t[0])*(r[1]-t[1])-(n[1]-t[1])*(r[0]-t[0])}function e(t){for(var n=[],e=0;e<t.length;e++){for(;n.length>=2&&r(n[n.length-2],n[n.length-1],t[e])<=0;)n.pop();n.push(t[e])}return n.pop(),n}function o(t){for(var n=t.reverse(),e=[],o=0;o<n.length;o++){for(;e.length>=2&&r(e[e.length-2],e[e.length-1],n[o])<=0;)e.pop();e.push(n[o])}return e.pop(),e}function i(t){var n,r=e(t);return n=o(t).concat(r),n.push(t[0]),n}t.exports=i},function(t,n){t.exports={toXy:function(t,n){return void 0===n?t.slice():t.map(function(t){return new Function("pt","return [pt"+n[0]+",pt"+n[1]+"];")(t)})},fromXy:function(t,n){return void 0===n?t.slice():t.map(function(t){return new Function("pt","var o = {}; o"+n[0]+"= pt[0]; o"+n[1]+"= pt[1]; return o;")(t)})}}},function(t,n){function r(t,n){this._cells=[],this._cellSize=n,t.forEach(function(t){var n=this.point2CellXY(t),r=n[0],e=n[1];void 0===this._cells[r]&&(this._cells[r]=[]),void 0===this._cells[r][e]&&(this._cells[r][e]=[]),this._cells[r][e].push(t)},this)}function e(t,n){return new r(t,n)}r.prototype={cellPoints:function(t,n){return void 0!==this._cells[t]&&void 0!==this._cells[t][n]?this._cells[t][n]:[]},rangePoints:function(t){for(var n=this.point2CellXY([t[0],t[1]]),r=this.point2CellXY([t[2],t[3]]),e=[],o=n[0];o<=r[0];o++)for(var i=n[1];i<=r[1];i++)e=e.concat(this.cellPoints(o,i));return e},removePoint:function(t){for(var n,r=this.point2CellXY(t),e=this._cells[r[0]][r[1]],o=0;o<e.length;o++)if(e[o][0]===t[0]&&e[o][1]===t[1]){n=o;break}return e.splice(n,1),e},point2CellXY:function(t){return[parseInt(t[0]/this._cellSize),parseInt(t[1]/this._cellSize)]},extendBbox:function(t,n){return[t[0]-n*this._cellSize,t[1]-n*this._cellSize,t[2]+n*this._cellSize,t[3]+n*this._cellSize]}},t.exports=e},function(t,n,r){"use strict";function e(t){return t.filter(function(t,n,r){var e=r[n-1];return 0===n||!(e[0]===t[0]&&e[1]===t[1])})}function o(t){return t.sort(function(t,n){return t[0]==n[0]?t[1]-n[1]:t[0]-n[0]})}function i(t,n){return Math.pow(n[0]-t[0],2)+Math.pow(n[1]-t[1],2)}function u(t,n,r){var e=[n[0]-t[0],n[1]-t[1]],o=[r[0]-t[0],r[1]-t[1]],u=i(t,n),l=i(t,r);return(e[0]*o[0]+e[1]*o[1])/Math.sqrt(u*l)}function l(t,n){for(var r=0;r<n.length-1;r++){var e=[n[r],n[r+1]];if(!(t[0][0]===e[0][0]&&t[0][1]===e[0][1]||t[0][0]===e[1][0]&&t[0][1]===e[1][1])&&p(t,e))return!0}return!1}function a(t){for(var n=1/0,r=1/0,e=-1/0,o=-1/0,i=t.length-1;i>=0;i--)t[i][0]<n&&(n=t[i][0]),t[i][1]<r&&(r=t[i][1]),t[i][0]>e&&(e=t[i][0]),t[i][1]>o&&(o=t[i][1]);return[e-n,o-r]}function f(t){return[Math.min(t[0][0],t[1][0]),Math.min(t[0][1],t[1][1]),Math.max(t[0][0],t[1][0]),Math.max(t[0][1],t[1][1])]}function c(t,n,r){for(var e,o,i=null,a=x,f=x,c=0;c<n.length;c++)e=u(t[0],t[1],n[c]),o=u(t[1],t[0],n[c]),e>a&&o>f&&!l([t[0],n[c]],r)&&!l([t[1],n[c]],r)&&(a=e,f=o,i=n[c]);return i}function s(t,n,r,e,o){for(var u,l,a,h,p,v,y,d=!1,x=0;x<t.length-1;x++)if(u=[t[x],t[x+1]],l=u[0].join()+","+u[1].join(),!(i(u[0],u[1])<n||!0===o[l])){a=0,p=f(u);do{p=e.extendBbox(p,a),v=p[2]-p[0],y=p[3]-p[1],h=c(u,e.rangePoints(p),t),a++}while(null===h&&(r[0]>v||r[1]>y));v>=r[0]&&y>=r[1]&&(o[l]=!0),null!==h&&(t.splice(x+1,0,h),e.removePoint(h),d=!0)}return d?s(t,n,r,e,o):t}function h(t,n,r){var i,u,l,f,c,h,p,x=n||20;return t.length<4?t.slice():(p=e(o(y.toXy(t,r))),f=a(p),c=[f[0]*g,f[1]*g],i=d(p),l=p.filter(function(t){return i.indexOf(t)<0}),h=Math.ceil(1/(p.length/(f[0]*f[1]))),u=s(i,Math.pow(x,2),c,v(l,h),{}),y.fromXy(u,r))}var p=r(7),v=r(5),y=r(4),d=r(3),x=Math.cos(90/(180/Math.PI)),g=.6;t.exports=h},function(t,n){function r(t,n,r,e,o,i){var u=(i-n)*(r-t)-(e-n)*(o-t);return u>0||!(u<0)}function e(t,n){var e=t[0][0],o=t[0][1],i=t[1][0],u=t[1][1],l=n[0][0],a=n[0][1],f=n[1][0],c=n[1][1];return r(e,o,l,a,f,c)!==r(i,u,l,a,f,c)&&r(e,o,i,u,l,a)!==r(e,o,i,u,f,c)}t.exports=e}])});
//# sourceMappingURL=phaser-tiled-hull.min.js.map