<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Home - Documentation</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="PolygonEdge.html">PolygonEdge</a></li></ul><h3>Modules</h3><ul><li><a href="module-phaser-tiled-hull.html">phaser-tiled-hull</a><ul class='methods'><li data-type='method'><a href="module-phaser-tiled-hull.html#~phaserTiledHull">phaserTiledHull</a></li></ul></li></ul>
</nav>

<div id="main">
    

    



    









    


    <section class="readme">
        <article><h1>Hulls from Tilemaps in Phaser</h1><p>A module for use with <a href="http://phaser.io/">Phaser</a> for reducing neighboring tiles in a tilemap into a single shape - a polygon &quot;hull&quot;. For example, the demo tilemap (left) is converted into a series of hulls (right, each hull is visualized in a random color). The hulls contain information about the edges - including midpoints, normals and line lengths. See <a href="https://github.com/mikewesthad/phaser-tiled-hull/blob/master/src/example/js/states/start.js">src/example/js/states/start.js</a> for example usage.</p>
<p>This was built to find hulls for casting dynamic shadows in a 2D lighting engine, but the hull calculation might be useful for simplifying things like collision detection.</p>
<p><img src="./doc-images/demo.png" style="width: 100%"></p>
<p>(Note: if you are viewing this on GitHub or NPM, you might want to check out the HTML documentation <a href="https://www.mikewesthad.com/phaser-tiled-hull/docs/">here</a>.)</p>
<h2>Usages</h2><p>Whether you include the library as a script tag or import it as a module, Phaser is a dependency. The library expects Phaser to be in the global scope.</p>
<h3>As a Script</h3><p>Download the dist/phaser-tiled-hull.min.js <a href="https://raw.githubusercontent.com/mikewesthad/phaser-tiled-hull/master/dist/phaser-tiled-hull.min.js">here</a> and include it in your HTML:</p>
<pre class="prettyprint source"><code>&lt;script src=&quot;dist/phaser-tiled-hull.min.js>&lt;script></code></pre><p>Inside of your own script, you can now use the global <code>phaserTiledHull</code>:</p>
<pre class="prettyprint source lang-js"><code>phaserTiledHull(...)</code></pre><p>See <a href="https://github.com/mikewesthad/phaser-tiled-hull/blob/master/src/example/js/states/start.js">src/example/js/states/start.js</a> for example usage in global mode.</p>
<h3>As a Module</h3><p>Install the dependency:</p>
<pre class="prettyprint source"><code>npm install --save phaser-tiled-hull</code></pre><p>To use the babelified and minified library:</p>
<pre class="prettyprint source lang-js"><code>import phaserTiledHull from &quot;phaser-tiled-hull&quot;;
phaserTiledHull(...)</code></pre><p>To use the raw es6 library (so you can transpile it to match your own project settings):</p>
<pre class="prettyprint source lang-js"><code>import phaserTiledHull from &quot;phaser-tiled-hull/src/library&quot;;
phaserTiledHull(...)</code></pre><h3>Example</h3><p>Setup:</p>
<pre class="prettyprint source lang-js"><code>// Assuming:
//  - You've imported phaserTiledHull via one of the methods above.
//  - You've created a Phaser game, loaded a tilemap called &quot;map-1&quot; and loaded a
//    tileset called &quot;tiles&quot;

// Add the cached tilemap
const tilemap = game.add.tilemap(&quot;map-1&quot;);
// Add the tileset - 1st param is name in Tiled, 2nd param is of image in Phaser's cache
const wallTileset = tilemap.addTilesetImage(&quot;tiles&quot;, &quot;tiles&quot;);
// Load your layers (via layer name from Tiled)
tilemap.createLayer(&quot;bg&quot;, g.width, g.height);
const wallLayer = tilemap.createLayer(&quot;walls&quot;, g.width, g.height);
// Set all tiles in the wall layer to be colliding
tilemap.setCollisionBetween(wallTileset.firstgid, wallTileset.firstgid +
    wallTileset.total, true, wallLayer);</code></pre><p>Examples:</p>
<pre class="prettyprint source lang-js"><code>// Method 1: find hull from colliding tiles
const hulls = phaserTiledHull(wallLayer, {checkCollide: true});
// -> hulls is now an array where each hull is represented as an array of PolygonEdges

// Method 2: find hull only using only the first 5 tiles in the tileset
const hulls = phaserTiledHull(wallLayer, {tileIndices: [1, 2, 3, 4, 5]});

// Method 3: find hull using a tile property that was set up in Tiled. To set properties:
// open Tiled, go to the tilesets panel and click the edit tileset button.)
const hulls = phaserTiledHull(wallLayer, {tileProperty: &quot;checkHull&quot;});

// Mixed method: you can combine options. When combining options, a tile only has to pass
// ONE of the checks in order to end up included in one of the hulls.
const hulls = phaserTiledHull(wallLayer, {
    tileIndices: [1],
    tileProperty: &quot;checkHull&quot;
});</code></pre><h2>To Do</h2><ul>
<li>Publish to npm</li>
<li>Add Phaser as an external dependency so that it doesn't have to be on the global. Relevant mostly for when Phaser v3 is released.</li>
<li>hull.js can't handle 1x tile concave gaps. Submit PR to hull.js to fix that. For example:</li>
</ul>
<pre class="prettyprint source"><code>Tilemap:             Hull:

 X X X               X X X
 X          ⟶       X   X
 X X X               X X X</code></pre><h2>Building the Source Files</h2><p>See the scripts section of package.json. Main commands:</p>
<pre class="prettyprint source"><code>npm run build:all   ⟶   Builds & minifies the library & example
npm run dev         ⟶   Builds the library & example and serves it via browser-sync</code></pre><p>Directory structure:</p>
<pre class="prettyprint source"><code>├── src/
    ├── example/                    ES6 example of how to use the library
    └── phaser-tiled-hull/          ES6 source for the library
├── public/                         The babel transpiled example code
└── dist/                           The transpiled library and source maps
    ├── phaser-tiled-hull.js        Transpiled
    └── phaser-tiled-hull.minjs     Transpiled and minified</code></pre><h2>Contributors</h2><p>@mikewesthad, @retwedt</p></article>
    </section>






</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.3</a> on Sun Jun 11 2017 10:25:17 GMT-0500 (Central Daylight Time) using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
</body>
</html>