<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <base data-ice="baseUrl">
  <title data-ice="title">API Document</title>
  <link type="text/css" rel="stylesheet" href="css/style.css">
  <link type="text/css" rel="stylesheet" href="css/prettify-tomorrow.css">
  <script src="script/prettify/prettify.js"></script>
  
  
  <script src="script/manual.js"></script>
<link data-ice="userStyle" rel="stylesheet" href="user/css/0-injected-style.css">
</head>
<body class="layout-container" data-ice="rootContainer">

<header>
  <a href="./">Home</a>
  
  <a href="identifiers.html">Reference</a>
  <a href="source.html">Source</a>
  
  <a data-ice="repoURL" href="https://github.com/mikewesthad/phaser-tiled-hull" class="repo-url-github">Repository</a>
  <div class="search-box">
  <span>
    <img src="./image/search.png">
    <span class="search-input-edge"></span><input class="search-input"><span class="search-input-edge"></span>
  </span>
    <ul class="search-result"></ul>
  </div>
</header>

<nav class="navigation" data-ice="nav"><div>
  <ul>
    
  <li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/library/polygon-edge.js~PolygonEdge.html">PolygonEdge</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-phaserTiledHull">phaserTiledHull</a></span></span></li>
</ul>
</div>
</nav>

<div class="content" data-ice="content"><div data-ice="index" class="github-markdown"><h1 id="hulls-from-tilemaps-in-phaser">Hulls from Tilemaps in Phaser</h1>
<p>A module for use with <a href="http://phaser.io/">Phaser</a> for reducing neighboring tiles in a tilemap into a single shape - a polygon &quot;hull&quot;. For example, the demo tilemap (left) is converted into a series of hulls (right, each hull is visualized in a random color). The hulls contain information about the edges - including midpoints, normals and line lengths. See <a href="https://github.com/mikewesthad/phaser-tiled-hull/blob/master/src/example/js/states/start.js">src/example/js/states/start.js</a> for example usage.</p>
<p>This was built to find hulls for casting dynamic shadows in a 2D lighting engine, but the hull calculation might be useful for simplifying things like collision detection.</p>
<p><img src="./doc-source/demo.png"></p>
<p>(Note: if you are viewing this on GitHub or NPM, you might want to check out the HTML documentation <a href="https://www.mikewesthad.com/phaser-tiled-hull/docs/">here</a>.)</p>
<h2 id="usages">Usages</h2>
<p>Whether you include the library as a script tag or import it as a module, Phaser is a dependency. The library expects Phaser to be in the global scope.</p>
<h3 id="as-a-script">As a Script</h3>
<p>Download the dist/phaser-tiled-hull.min.js <a href="https://raw.githubusercontent.com/mikewesthad/phaser-tiled-hull/master/dist/phaser-tiled-hull.min.js">here</a> and include it in your HTML:</p>
<pre><code><code class="source-code prettyprint">&lt;script src=&quot;dist/phaser-tiled-hull.min.js&gt;&lt;script&gt;</code>
</code></pre><p>Inside of your own script, you can now use the global <code>phaserTiledHull</code>:</p>
<pre><code class="lang-js"><code class="source-code prettyprint">phaserTiledHull(...)</code>
</code></pre>
<p>See <a href="https://github.com/mikewesthad/phaser-tiled-hull/blob/master/src/example/js/states/start.js">src/example/js/states/start.js</a> for example usage in global mode.</p>
<h3 id="as-a-module">As a Module</h3>
<p>Install the dependency:</p>
<pre><code><code class="source-code prettyprint">npm install --save phaser-tiled-hull</code>
</code></pre><p>To use the babelified and minified library:</p>
<pre><code class="lang-js"><code class="source-code prettyprint">import phaserTiledHull from &quot;phaser-tiled-hull&quot;;
phaserTiledHull(...)</code>
</code></pre>
<p>To use the raw es6 library (so you can transpile it to match your own project settings):</p>
<pre><code class="lang-js"><code class="source-code prettyprint">import phaserTiledHull from &quot;phaser-tiled-hull/src/library&quot;;
phaserTiledHull(...)</code>
</code></pre>
<h3 id="example">Example</h3>
<p>Setup:</p>
<pre><code class="lang-js"><code class="source-code prettyprint">// Assuming:
//  - You&apos;ve imported phaserTiledHull via one of the methods above.
//  - You&apos;ve created a Phaser game, loaded a tilemap called &quot;map-1&quot; and loaded a
//    tileset called &quot;tiles&quot;

// Add the cached tilemap
const tilemap = game.add.tilemap(&quot;map-1&quot;);
// Add the tileset - 1st param is name in Tiled, 2nd param is of image in Phaser&apos;s cache
const wallTileset = tilemap.addTilesetImage(&quot;tiles&quot;, &quot;tiles&quot;);
// Load your layers (via layer name from Tiled)
tilemap.createLayer(&quot;bg&quot;, g.width, g.height);
const wallLayer = tilemap.createLayer(&quot;walls&quot;, g.width, g.height);
// Set all tiles in the wall layer to be colliding
tilemap.setCollisionBetween(wallTileset.firstgid, wallTileset.firstgid +
    wallTileset.total, true, wallLayer);</code>
</code></pre>
<p>Examples:</p>
<pre><code class="lang-js"><code class="source-code prettyprint">// Method 1: find hull from colliding tiles
const hulls = phaserTiledHull(wallLayer, {checkCollide: true});
// -&gt; hulls is now an array where each hull is represented as an array of PolygonEdges

// Method 2: find hull only using only the first 5 tiles in the tileset
const hulls = phaserTiledHull(wallLayer, {tileIndices: [1, 2, 3, 4, 5]});

// Method 3: find hull using a tile property that was set up in Tiled. To set properties:
// open Tiled, go to the tilesets panel and click the edit tileset button.)
const hulls = phaserTiledHull(wallLayer, {tileProperty: &quot;checkHull&quot;});

// Mixed method: you can combine options. When combining options, a tile only has to pass
// ONE of the checks in order to end up included in one of the hulls.
const hulls = phaserTiledHull(wallLayer, {
    tileIndices: [1],
    tileProperty: &quot;checkHull&quot;
});</code>
</code></pre>
<h2 id="to-do">To Do</h2>
<ul>
<li>Publish to npm</li>
<li>Add Phaser as an external dependency so that it doesn&apos;t have to be on the global. Relevant mostly for when Phaser v3 is released.</li>
<li>hull.js can&apos;t handle 1x tile concave gaps. Submit PR to hull.js to fix that. For example:</li>
</ul>
<pre><code><code class="source-code prettyprint">Tilemap:             Hull:

 X X X               X X X
 X          &#x27F6;       X   X
 X X X               X X X</code>
</code></pre><h2 id="building-the-source-files">Building the Source Files</h2>
<p>See the scripts section of package.json. Main commands:</p>
<pre><code><code class="source-code prettyprint">npm run build:all   &#x27F6;   Builds &amp; minifies the library &amp; example
npm run dev         &#x27F6;   Builds the library &amp; example and serves it via browser-sync</code>
</code></pre><p>Directory structure:</p>
<pre><code><code class="source-code prettyprint">&#x251C;&#x2500;&#x2500; src/
    &#x251C;&#x2500;&#x2500; example/                    ES6 example of how to use the library
    &#x2514;&#x2500;&#x2500; phaser-tiled-hull/          ES6 source for the library
&#x251C;&#x2500;&#x2500; public/                         The babel transpiled example code
&#x2514;&#x2500;&#x2500; dist/                           The transpiled library and source maps
    &#x251C;&#x2500;&#x2500; phaser-tiled-hull.js        Transpiled
    &#x2514;&#x2500;&#x2500; phaser-tiled-hull.minjs     Transpiled and minified</code>
</code></pre><h2 id="contributors">Contributors</h2>
<p>@mikewesthad, @retwedt</p>
</div>
</div>

<footer class="footer">
  Generated by <a href="https://esdoc.org">ESDoc<span data-ice="esdocVersion">(0.5.2)</span><img src="./image/esdoc-logo-mini-black.png"></a>
</footer>

<script src="script/search_index.js"></script>
<script src="script/search.js"></script>
<script src="script/pretty-print.js"></script>
<script src="script/inherited-summary.js"></script>
<script src="script/test-summary.js"></script>
<script src="script/inner-link.js"></script>
<script src="script/patch-for-local.js"></script>
</body>
</html>
